---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
import FeatureCard from '../components/FeatureCard.astro';
import SectionHeading from '../components/SectionHeading.astro';

const base = import.meta.env.BASE_URL;

const features = [
  { title: 'Live Gas Readings', description: 'See Helium, Oxygen, temperature, and pressure in real-time as you analyze.', icon: 'üìä' },
  { title: 'MOD Calculation', description: 'Automatic Maximum Operating Depth calculation at user selectable PPO‚ÇÇ.', icon: 'üéØ' },
  { title: 'Label Preview', description: 'See exactly what your printed label will look like before printing, with the option to include a narrow label with just the analysis for placing on top of the valve.', icon: 'üëÅÔ∏è' },
  { title: 'One-Tap Printing', description: 'Print professional, color tank labels wirelessly to your Brother printer.', icon: 'üè∑Ô∏è' },
  { title: 'Label Sharing', description: 'No printer? No Problem! You can still save history of your analysis in the app log or save an image to your files.', icon: 'üíæ' },
  { title: 'Mix Notation', description: 'Standard gas mix notation (e.g., 16/40) calculated automatically.', icon: 'üî¢' },
  { title: 'Analysis History', description: 'Review past readings and reprint labels when needed.', icon: 'üìú' },
];

const printerSteps = [
  'Turn on your <a href="https://amzn.to/4pGFRxT">Brother QL-820NWB</a> printer',
  'On the printer, hold the Bluetooth button until the light blinks',
  'On your iPhone, go to Settings ‚Üí Bluetooth',
  'Find and pair with "QL-820NWB"',
  'Open the GasTag app and tap the printer icon to connect',
];
---

<Layout title="App" description="Download the GasTag iOS app to view gas readings and print tank labels.">
  <Navigation />

  <main class="pt-16">
    <!-- Header -->
    <section class="bg-gradient-to-b from-gray-50 to-white py-16 lg:py-24">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div>
            <h1 class="text-4xl font-bold text-gray-900 mb-4">GasTag for iOS</h1>
            <p class="text-xl text-gray-600 mb-8">
              View live gas readings from your DiveSoft Analyzer and print professional tank labels wirelessly.
            </p>

            <!-- App Store Button -->
            <a
              href="https://apps.apple.com/us/app/gastag/id6757646672"
              class="inline-flex items-center gap-3 bg-black text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition-colors"
            >
              <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor">
                <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
              </svg>
              <div class="text-left">
                <div class="text-xs">Download on the</div>
                <div class="text-lg font-semibold -mt-1">App Store</div>
              </div>
            </a>

            <p class="text-sm text-gray-500 mt-4">Requires iOS 17.0 or later. Compatible with iPhone.</p>
          </div>

          <div class="flex justify-center">
            <img
              src={`${base}images/screenshot.jpg`}
              alt="GasTag app screenshot"
              class="w-72 rounded-3xl shadow-2xl"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section class="py-16 bg-white">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeading
          title="App Features"
          subtitle="Everything you need for efficient gas analysis"
        />

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {features.map((feature) => (
            <FeatureCard
              title={feature.title}
              description={feature.description}
              icon={feature.icon}
            />
          ))}
        </div>
      </div>
    </section>

    <!-- Printer Setup -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeading
          title="Printer Setup"
          subtitle="Connect your Brother QL-820NWB for label printing"
        />

        <div class="bg-white rounded-xl p-8 shadow-sm border border-gray-100">
          <h3 class="font-semibold text-gray-900 mb-4">Required Printer</h3>
          <p class="text-gray-600 mb-6">
            GasTag works with the
            <strong>
              <a href="https://amzn.to/4pGFRxT" class="underline hover:text-primary">Brother QL-820NWB</a>
            </strong>
            label printer using
            <strong>
              <a href="https://amzn.to/3NjMTLC" class="underline hover:text-primary">DK-2251</a>
            </strong>
            continuous length labels (red/black on white) or for longer lasting labels in the water we recommend
            <strong>
              <a href="https://amzn.to/3M6o1GJ" class="underline hover:text-primary">DK-2212</a>
            </strong>
            continuous length labels (black and white only).
            The DK2251's will last for a few dives but are available in red/black on white while the DK-2212's last
            longer, they are great for stage or bailout bottles but only available in black and white.
          </p>

          <h3 class="font-semibold text-gray-900 mb-4">Pairing Steps</h3>
          <ol class="space-y-3">
            {printerSteps.map((step, index) => (
              <li class="flex items-start gap-3">
                <span class="w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0">
                  {index + 1}
                </span>
                <span class="text-gray-600" set:html={step}></span>
              </li>
            ))}
          </ol>
        </div>
      </div>
    </section>

    <!-- Compatibility -->
    <section class="py-16 bg-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeading title="Compatibility" />

        <div class="grid md:grid-cols-2 gap-8">
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-semibold text-gray-900 mb-3">iPhone 15 or later</h3>
            <p class="text-gray-600 text-sm">
              USB-C port can power the GasTag bridge directly. Connect your iPhone to the ESP32 with a USB-C cable.
            </p>
          </div>

          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-semibold text-gray-900 mb-3">Older iPhones</h3>
            <p class="text-gray-600 text-sm">
              Use a USB power bank to power the GasTag bridge. The app connects via Bluetooth regardless of how the bridge is powered.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>
